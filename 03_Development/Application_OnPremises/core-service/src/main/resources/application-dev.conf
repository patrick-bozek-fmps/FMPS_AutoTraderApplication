# Development Environment Configuration
# Overrides for local development

include "application.conf"

app {
    environment = "dev"
}

server {
    port = 8080
    
    cors {
        enabled = true
        allowedHosts = ["localhost", "127.0.0.1", "localhost:3000"]
    }
}

database {
    url = "jdbc:sqlite:build/dev-db/autotrader-dev.db"
    
    hikari {
        maximumPoolSize = 5
        minimumIdle = 1
    }
    
    flyway {
        cleanDisabled = false  # Allow clean in dev
    }
}

logging {
    level = "DEBUG"
    
    console {
        enabled = true
        colorOutput = true  # Colored console output for dev
    }
    
    file {
        enabled = true
        path = "build/logs"
    }
    
    loggers {
        "com.fmps.autotrader" = "DEBUG"
        "com.fmps.autotrader.core.database" = "DEBUG"
        "com.fmps.autotrader.core.api" = "DEBUG"
        "io.ktor" = "INFO"
        "org.jetbrains.exposed.sql" = "DEBUG"  # Show SQL queries in dev
        "com.zaxxer.hikari" = "DEBUG"
    }
}

exchanges {
    binance {
        enabled = false  # Disabled in dev (use demo mode)
        api {
            baseUrl = "https://testnet.binance.vision"  # Always use testnet in dev
        }
    }
    
    bitget {
        enabled = false  # Disabled in dev (use demo mode)
    }
}

aiTrader {
    defaultRisk {
        maxLeverage = 5  # Lower leverage in dev
        defaultStopLossPercentage = 0.03  # More conservative in dev
    }
}

trading {
    demoMode {
        enabled = true
        initialBalance = 50000.0  # More virtual money for testing
        allowRealTrading = false
    }
    
    marketData {
        candlestickRefreshMs = 30000  # Faster refresh in dev
        orderBookRefreshMs = 3000
        tickerRefreshMs = 1000
    }
}

performance {
    metrics {
        enabled = true
        collectionIntervalMs = 30000  # More frequent metrics in dev
    }
    
    healthCheck {
        enabled = true
        intervalSeconds = 15  # More frequent health checks
    }
}

